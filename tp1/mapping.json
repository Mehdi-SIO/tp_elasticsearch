{
	"settings": {
		"number_of_shards": 1,
		"number_of_replicas": 0,
		"analysis": {
      "filter": {
        "twitter_stop" : {
          "type": "stop",
          "stopwords": ["rt", "t.co", "http"]
        },
        "french_stop": {
          "type": "stop",
          "stopwords": "_french_"
        },
        "french_stemmer": {
          "type": "stemmer",
          "language": "light_french"
        },
        "english_stop": {
          "type":       "stop",
          "stopwords":  "_english_"
        },
        "english_stemmer": {
          "type":       "stemmer",
          "language":   "english"
        },
        "english_possessive_stemmer": {
          "type":       "stemmer",
          "language":   "possessive_english"
        }
      },
      "analyzer": {
        "twitter_en": {
          "tokenizer":  "standard",
          "filter": [
            "english_possessive_stemmer",
            "lowercase",
            "english_stop",
            "twitter_stop",
            "english_stemmer"
          ]
        },
        "twitter_fr": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "french_stop",
            "twitter_stop",
            "french_stemmer"
          ]
        },
        "not_really_analyzer": {
          "tokenizer": "keyword",
          "filter": ["lowercase", "asciifolding"]
        },
        "text_analyzer": {
          "tokenizer": "whitespace",
          "filter": ["lowercase", "asciifolding"]
        },
        "language_analyzer": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "english_possessive_stemmer",
            "english_stop",
            "french_stop",
            "twitter_stop"
          ]
        }
      }
    }
	},
	"mappings": {
		"tweet": {
			"properties": {
			  "text": {
			    "type": "string",
			    "analyzer": "text_analyzer",
			    "fields": {
			      "text_raw": {
			        "type": "string",
			        "analyzer": "not_really_analyzer"
			      },
			      "text_language": {
			        "type": "string",
			        "analyzer": "language_analyzer"
			      }
			    }
			  },
			  "user": {
			    "type": "object",
			    "properties": {
			      "screen_name": {
			        "type": "string",
			        "index": "not_analyzed"
			      }
			    }
			  },
			  "created_at": {
			    "type": "date",
			    "format": "EE MMM d HH:mm:ss Z yyyy"
			  }
			}
		}
	}
}